<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript" src="./js/jsqrscanner.nocache.js"></script>
  <link type="text/css" rel="stylesheet" href="./css/style.css">
</head>

<body>
<h2>Check-in Record</h2>

<div id="QRModal" class="modal">
  <div class="modal-content">
      <span class="close">&times;</span>
      <div id="scanner"></div>
      <textarea id="scannedTextMemo" readonly></textarea>
  </div>
</div>

<table style="width:100%">
  <tr>
    <td id="1">1</td>
    <td id="2">2</td> 
  </tr>
  <tr>
    <td id="3">3</td>
    <td id="4">4</td>
  </tr>
  <tr>
    <td id="5">5</td>
    <td id="6">6</td>
  </tr>
</table>

<button class="button" id="QRbutton" style="vertical-align:middle"><span>Scan QR Code</span></button>

<script>
// document.getElementById("QR").addEventListener("click", Change);

// function Change() {
//     document.getElementById("1").innerHTML = "Yo!";
// }

// Get the modal
var modal = document.getElementById('QRModal');

// Get the button that opens the modal
var btn = document.getElementById("QRbutton");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal 
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

function onQRCodeScanned(scannedText)
    {
      var scannedTextMemo = document.getElementById("scannedTextMemo");
      if(scannedTextMemo)
      {
        scannedTextMemo.value = scannedText;

          if(scannedTextMemo.value == "Chocolate")
          {
            document.getElementById("1").innerHTML = scannedTextMemo.value;
          }

          if(scannedTextMemo.value == "Candy")
          {
            document.getElementById("2").innerHTML = scannedTextMemo.value;
          }
      }
    }
  
    //this function will be called when JsQRScanner is ready to use
function JsQRScannerReady()
    {
        //create a new scanner passing to it a callback function that will be invoked when
        //the scanner succesfully scan a QR code
        var jbScanner = new JsQRScanner(onQRCodeScanned);
        //reduce the size of analyzed images to increase performance on mobile devices
        jbScanner.setSnapImageMaxSize(300);
      var scannerParentElement = document.getElementById("scanner");
      if(scannerParentElement)
      {
          //append the jbScanner to an existing DOM element
        jbScanner.appendTo(scannerParentElement);
      }        
    }
</script>
</body>

</html>
